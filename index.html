<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Newborn Feeder</title>
    <meta name="description" content="Simple newborn feeding tracker and timer">
    <meta name="theme-color" content="#4A90E2">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="styles.css">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>

    <div class="app-container">
        <header>
            <div id="live-clock" class="live-clock">00:00</div>
            <div id="encouragement" class="encouragement">You're doing great!</div>
        </header>

        <main id="view-home" class="active-view">
            <div class="timer-toggle-container">
                <button id="btn-mode-countdown" class="toggle-btn active">Next Feed</button>
                <button id="btn-mode-stopwatch" class="toggle-btn">Time Since</button>
            </div>

            <div class="timer-display-container">
                <div id="main-timer" class="main-timer">00:00:00</div>
                <div id="timer-label" class="timer-label">Until next feed</div>
            </div>

            <button id="btn-start-feed" class="btn-primary btn-large ripple">
                Start Feed
            </button>

            <div class="recent-history">
                <h3>Last 48 Hours</h3>
                <ul id="feed-list-preview" class="feed-list"></ul>
                <button id="btn-view-history" class="text-link">View Full History & Stats</button>
            </div>
        </main>

        <main id="view-stats" class="hidden-view">
            <div class="nav-header">
                <button class="btn-back" data-target="view-home">← Back</button>
                <h2>History & Stats</h2>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-label">24h Feeds</span>
                    <span class="stat-value" id="stat-24h">0</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Avg Gap</span>
                    <span class="stat-value" id="stat-avg">--</span>
                </div>
            </div>

            <div class="list-container">
                <ul id="feed-list-full" class="feed-list"></ul>
            </div>
        </main>

        <main id="view-settings" class="hidden-view">
            <div class="nav-header">
                <button class="btn-back" data-target="view-home">← Back</button>
                <h2>Settings</h2>
            </div>
            
            <div class="settings-group">
                <label>Theme Color</label>
                <div class="theme-toggle">
                    <button id="theme-blue" class="theme-dot blue active"></button>
                    <button id="theme-pink" class="theme-dot pink"></button>
                </div>
            </div>

            <div class="settings-group">
                <label>Display Mode</label>
                <button id="btn-dark-mode" class="btn-secondary">Toggle Dark Mode</button>
            </div>

            <div class="settings-group">
                <label>Feed Interval (Hours)</label>
                <input type="number" id="setting-interval" value="2" step="0.5" min="0.5">
            </div>

            <div class="settings-group">
                <button id="btn-export" class="btn-secondary">Export Data (JSON)</button>
                <button id="btn-clear-data" class="btn-danger">Clear All Data</button>
            </div>
        </main>

        <nav class="bottom-nav">
            <button data-target="view-home" class="nav-item active">
                <span>Timer</span>
            </button>
            <button data-target="view-stats" class="nav-item">
                <span>Log & Stats</span>
            </button>
            <button data-target="view-settings" class="nav-item">
                <span>Settings</span>
            </button>
        </nav>
    </div>

    <div id="feed-modal" class="modal">
        <div class="modal-content">
            <h3>Feed Details</h3>
            <form id="feed-form">
                <input type="hidden" id="feed-id">
                
                <label>Start Time</label>
                <input type="datetime-local" id="feed-start">

                <label>End Time (Optional)</label>
                <input type="datetime-local" id="feed-end">

                <label>Type</label>
                <select id="feed-type">
                    <option value="breast-l">Breast (Left)</option>
                    <option value="breast-r">Breast (Right)</option>
                    <option value="bottle">Bottle (Pumped)</option>
                    <option value="formula">Formula</option>
                </select>

                <div id="formula-details" class="hidden">
                    <label>Amount (oz)</label>
                    <input type="number" id="feed-amount" step="0.5">
                    
                    <label>Formula Brand</label>
                    <input type="text" id="feed-brand" list="brand-list">
                    <datalist id="brand-list"></datalist>
                </div>

                <label>Notes</label>
                <textarea id="feed-notes" rows="2"></textarea>

                <div class="modal-actions">
                    <button type="button" id="btn-delete-feed" class="btn-danger-text">Delete</button>
                    <div class="right-actions">
                        <button type="button" id="btn-cancel-modal" class="btn-secondary">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log('Service Worker Registered'));
        }
    </script>
</body>
</html>
